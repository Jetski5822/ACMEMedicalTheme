@{
    // Model is Model.Menu from the layout (Layout.Menu)
    Model.Classes.Add("nav navbar-nav");
    var tag = Tag(Model, "ul");

    var items = (IList<dynamic>)Enumerable.Cast<dynamic>(Model.Items);

    if (items.Any()) {
        items[0].Classes.Add("first");
        items[items.Count - 1].Classes.Add("last");
    }
}

@tag.StartElement
@foreach (var item in items) {

    var shapeType = string.Format("SideNavigation_MenuItem");
    item.Metadata.Alternates.Clear();
    item.Metadata.Type = shapeType;
    item.Metadata.BindingSources.Clear();
    item.Metadata.DisplayType = "";
    
    @Display(item)
}
@tag.EndElement